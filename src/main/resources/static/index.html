<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
</head>
<body>
<h2>输入框示例</h2>
    <label >名字：</label><br>
    <input type="text" id="un" name="userName" class="data-component"><br>
    <label >密码：</label><br>
    <input type="text" id="pw" class="data-component"><br>
    <input type="submit"  class="icon-btn" id="icon-btn" value="提交">

<script>
    // 获取页面上所有组件的值
    const components = {
        userName: document.getElementById('un').value,
        passWord: document.getElementById('pw').value
    };
    components.passWord = document.getElementById('pw').value;
    // 定义后端接口的 URL
    const backendInterfaceUrl = 'http://localhost:8080/user/login';

    // 定义提交组件值的函数
    function submitComponentValues() {

        console.log(document.getElementById('un').value)
        console.log(components)
        // 构建请求参数对象
        const params = Object.entries(components).reduce((obj, [key, value]) => {
            obj[key] = value;
            return obj;
        }, {});
        // 使用 fetch 方法发送 POST 请求到后端接口
        fetch(backendInterfaceUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(params)
        })
            .then(console.log("11"))
            .then(console.log("22"))
            .catch(console.log("33"));
    }

    // 为提交按钮添加点击事件处理程序
    document.getElementById('icon-btn').addEventListener('click', submitComponentValues);
</script>

</body>
</html>